#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸ” æ‰§è¡Œ pre-push æ£€æŸ¥..."

# è¿è¡Œ Biome lint
echo "ğŸ” è¿è¡Œ Biome lint..."
if ! bunx @biomejs/biome lint .; then
    echo "âŒ Biome lint æ£€æŸ¥å¤±è´¥ï¼Œè¯·ä¿®å¤ä»£ç é—®é¢˜åå†æ¨é€"
    exit 1
fi

# è¿è¡Œæ„å»ºæ£€æŸ¥
echo "ğŸ—ï¸ è¿è¡Œ Next.js æ„å»ºæ£€æŸ¥..."
if ! bunx next build; then
    echo "âŒ Next.js æ„å»ºå¤±è´¥ï¼Œè¯·ä¿®å¤æ„å»ºé—®é¢˜åå†æ¨é€"
    exit 1
fi

echo "âœ… æ‰€æœ‰æ£€æŸ¥é€šè¿‡ï¼Œå¯ä»¥æ¨é€"
